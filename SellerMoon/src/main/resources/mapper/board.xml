<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kh.mybatis.mapper.boardMapper">
	<resultMap type="java.util.Map" id="boardMap"></resultMap>
	
	<!-- 커뮤니티 전체 글 조회 -->
		<!-- jsonBoardList 호출 -->
			<!-- react-oracle에서 전체 글 조회 및 글 상세보기 조회 -->
	<select id="boardList" parameterType="java.util.Map" resultType="map">
		SELECT board_no, board_category, board_title, board_content, member_name, board_written_date, board_hit
			  ,board_like, board_dislike, board_report_count, board_blind
    	  FROM tb_community NATURAL JOIN tb_member
    	<where>
    		<if test='board_no != null'>
    			AND board_no = ${board_no}
    		</if>
    	</where>
      ORDER BY board_no DESC
	</select>
	
	<!-- 커뮤니티 상세 글 블라인드 여부 설정 -->
	<update id="boardBlind" parameterType="map">
		UPDATE tb_community
           SET board_blind = #{board_blind}
		 WHERE board_no = #{board_no}
	</update>
	
	
	
	
	<!-- 커뮤니티 상세 글 삭제 -->
			<!-- react-oracle에서 board_no에 해당하는 글 삭제 -->
	<delete id="boardDelete" parameterType="map">
		DELETE FROM tb_community
              WHERE board_no = #{board_no}
	</delete>
	
	
	<!-- 커뮤니티 상세 글 조회 -->
		<!-- jsonBoardDetail 호출 -->
	<select id="boardDetail" parameterType="map" resultType="map">
		SELECT board_no, board_category, board_title, board_content, member_name
			  ,board_written_date, board_hit, board_like, board_dislike, board_report_count
  		  FROM tb_community NATURAL JOIN tb_member
  		 WHERE board_no = #{board_no}
	</select>
</mapper>